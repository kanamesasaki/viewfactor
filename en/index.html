<!doctype html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CCZTCJYRD8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CCZTCJYRD8');
  </script>
  <meta charset="UTF-8">
  <title>View Factor Calculator</title>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <link rel="stylesheet" href="../style.css">
</head>

<header>
  <a href="https://kanamesasaki.github.io/">Author's page</a> &#187;
  <a href="index.html">View Factor Calculator</a>
  <span style="float: right"><ul class="select-lang">
      <li><a href="../en/index.html">English</a></li>
      <li><a href="">Deutsch</a></li>
      <li><a href="">日本語</a></li>
  </ul></span>
</header>
<body>
  <h1>View Factor Calculator</h1>
  <h2>View factor basics</h2>
  <ul>
    <li><a href="vf-definition.html">What is a view factor?</a></li>
    <li><a href="vf-analytical.html">Analytical view factor calculation</a></li>
    <li>Data exchange between shader and JavaScript</li>
    <li>Random number generation in GPU fragment shader</li>
  </ul>

  <h2>View factor calculator</h2>
  <h3>Differential surface to circular disk in parallel plane</h3><br>

  <table>
    <tr>
      <td rowspan="5"><img src="..\images\vf_ds-disk.svg" width="300"></td>
      <td>r (radius) : </td>
      <td colspan="2"><input type=number id="disk-r" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>h (height) : </td>
      <td colspan="2"><input type=number id="disk-h" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{d1-2} = \frac{1}{H^2+1} \\
        \mathrm{where}~~
        H = \frac{h}{r}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="disk-ana-calc">Calculate</button></td>
      <td><output name="disk-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="disk-num-calc">Calculate</button></td>
      <td><output name="disk-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <h3>Differential surface to rectangular surface in parallel plane</h3><br>

  <table>
    <tr>
      <td rowspan="6"><img src="..\images\vf_ds-rect.svg" width="300"></td>
      <td>a : </td>
      <td colspan="2"><input type=number id="ds-rect-a" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>b : </td>
      <td colspan="2"><input type=number id="ds-rect-b" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>c : </td>
      <td colspan="2"><input type=number id="ds-rect-c" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{d1-2} = \frac{1}{2\pi} \left( \frac{A}{\sqrt{1+A^2}} \arctan \frac{B}{\sqrt{1+A^2}}
        + \frac{B}{\sqrt{1+B^2}} \arctan \frac{A}{\sqrt{1+B^2}} \right) \\
        \mathrm{where}~~A = \frac{a}{c}, ~~ B = \frac{b}{c}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="ds-rect-ana-calc">Calculate</button></td>
      <td><output name="ds-rect-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="ds-rect-num-calc">Calculate</button></td>
      <td><output name="ds-rect-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <h3>Differential surface to sphere</h3><br>

  <table>
    <tr>
      <td rowspan="6"><img src="..\images\vf_ds-sphere.svg" width="300"></td>
      <td>h (height) : </td>
      <td><input type=number id="ds-sphere-h" step=0.1 value=0.0 min=0.0><br>
    </tr>
    <tr>
      <td>r (radius) : </td>
      <td><input type=number id="ds-sphere-r" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>&theta; [&deg;] : </td>
      <td><input type=number id="ds-sphere-theta" step=0.1 value=0.0 min=0.0 max=180.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{d1-2} = \left( \frac{r}{h} \right)^2 \cos \theta \\
        \mathrm{where}~~\theta \le \arccos \frac{r}{h}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="ds-sphere-ana-calc">Calculate</button></td>
      <td><output name="ds-sphere-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="ds-sphere-num-calc">Calculate</button></td>
      <td><output name="ds-sphere-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <h3>Disk to parallel coaxial disk</h3><br>

  <table>
    <tr>
      <td rowspan="6"><img src="..\images\vf_disk-disk.svg" width="300"></td>
      <td>a : </td>
      <td><input type=number id="disk-disk-a" step=0.1 value=0.0 min=0.0><br>
    </tr>
    <tr>
      <td>r1 : </td>
      <td><input type=number id="disk-disk-r1" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>r2 : </td>
      <td><input type=number id="disk-disk-r2" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{1-2} = \frac{1}{2} \left\{ X - \sqrt{X^2 - 4\left( \frac{R_2}{R_1} \right)^2} \right\} \\
        \mathrm{where} ~~ X = 1 + \frac{1 + R_2^2}{R_1^2}, ~~
        R_1 = \frac{r_1}{a}, ~~ R_2 = \frac{r_2}{a}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="disk-disk-ana-calc">Calculate</button></td>
      <td><output name="disk-disk-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="disk-disk-num-calc">Calculate</button></td>
      <td><output name="disk-disk-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <h3>Identical, parallel, directly opposed rectangles</h3><br>

  <table>
    <tr>
      <td rowspan="6"><img src="..\images\vf_rect-rect-p.svg" width="300"></td>
      <td>a : </td>
      <td><input type=number id="rect-rect-p-a" step=0.1 value=0.0 min=0.0><br>
    </tr>
    <tr>
      <td>b : </td>
      <td><input type=number id="rect-rect-p-b" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>c : </td>
      <td><input type=number id="rect-rect-p-c" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{1-2} = \frac{2}{\pi XY} \left\{ \ln \left[ \frac{(1+X^2)(1+Y^2)}{1+X^2+Y^2} \right]^{1/2} + X \sqrt{1+Y^2} \arctan \frac{X}{\sqrt{1+Y^2}} \right. \\
        \left. + Y \sqrt{1+X^2} \arctan \frac{Y}{\sqrt{1+X^2}} - X \arctan X - Y \arctan Y \right\} \\
        \mathrm{where} ~~ X = \frac{a}{c}, ~~ Y = \frac{b}{c}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="rect-rect-p-ana-calc">Calculate</button></td>
      <td><output name="rect-rect-p-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="rect-rect-p-num-calc">Calculate</button></td>
      <td><output name="rect-rect-p-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <h3>Two rectangles with one common edge and 90&deg; angle</h3><br>

  <table>
    <tr>
      <td rowspan="6"><img src="..\images\vf_rect-rect-v.svg" width="300"></td>
      <td>h : </td>
      <td><input type=number id="rect-rect-v-w" step=0.1 value=0.0 min=0.0><br>
    </tr>
    <tr>
      <td>w : </td>
      <td><input type=number id="rect-rect-v-h" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td>l : </td>
      <td><input type=number id="rect-rect-v-l" step=0.1 value=0.0 min=0.0></td>
    </tr>
    <tr>
      <td colspan="3">
        \begin{gather}
        F_{1-2} = \frac{1}{\pi W} \left( W \arctan \frac{1}{W} + H \arctan \frac{1}{H} - \sqrt{H^2+W^2} \arctan \frac{1}{\sqrt{H^2+W^2}} \right. \\
        \left. + \frac{1}{4} \ln \left\{ \frac{(1+W^2)(1+H^2)}{1+W^2+H^2} \left[ \frac{W^2 (1+W^2+H^2)}{(1+W^2)(W^2+H^2)} \right]^{W^2}  \left[ \frac{H^2 (1+W^2+H^2)}{(1+H^2)(W^2+H^2)} \right]^{H^2} \right\} \right) \\
        \mathrm{where} ~~ H = \frac{h}{l}, ~~ W = \frac{w}{l}
        \end{gather}
      </td>
    </tr>
    <tr>
      <td>Analytical calculation</td>
      <td><button type="button" id="rect-rect-v-ana-calc">Calculate</button></td>
      <td><output name="rect-rect-v-ana-vf">0.0</output></td>
    </tr>
    <tr>
      <td>Monte-Carlo ray tracing</td>
      <td><button type="button" id="rect-rect-v-num-calc">Calculate</button></td>
      <td><output name="rect-rect-v-num-vf">0.0</output></td>
    </tr>
  </table>
  <hr>

  <div class="screen"></div>
    <button type="button" id="test">Calculation</button>
    <input type=number id="number-of-rays" step=1 value=10000>
    <canvas id="webgl-canvas">
      Your browser does not support the HTML5 canvas element.
    </canvas>
  </div>

  <script type="module" src="../src/js/main.js"></script>  
</body>

<footer>
  <a href="https://kanamesasaki.github.io/">Author's page</a> &#187;
  <a href="index.html">View Factor Calculator</a>
  <span style="float: right">Copyright 2022, Kaname Sasaki</span>
</footer>
</html>